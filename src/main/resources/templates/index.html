<div id="sone">

	<script src="javascript/jquery-1.4.2.js" language="javascript"></script>
	<script src="javascript/sone.js" language="javascript"></script>

	<script language="javascript">
		/* register input field/textarea swap. */
		$(document).ready(function() {
			registerInputTextareaSwap("#sone input.createpost", "What are you doing?");
		});
	</script>

	<h1><%= Page.Index.Page.Title|l10n|insert needle="{sone}" key=currentSone.name|html></h1>

	<div>
		<form action="createPost.html" method="post">
			<div>
				<label for="text"><%= Page.Index.Label.Text|l10n|html></label>
				<input class="createpost" name="text" />
			</div>
			<div>
				<button type="submit"><%= Page.Index.Button.Post|l10n|html></button>
			</div>
		</form>
	</div>

	<h1><%= Page.Index.PostList.Title|l10n|html></h1>

	<div id="posts">
		<%foreach posts post>
			<div class="post">
				<div class="author"><a href="viewSone.html?sone=<% post.sone.id>"><% post.sone.niceName|html></a></div>
				<div class="text"><% post.text|html></div>
				<div class="time"><% post.time|date format="MMM d, yyyy, HH:mm:ss"></div>
			</div>
			<%foreach post.replies reply>
				<div class="reply">
					<div class="author"><a href="viewSone.html?sone=<% reply.sone.id>"><% reply.sone.niceName|html></a></div>
					<div class="text"><% reply.text|html></div>
					<div class="time"><% reply.time|date format="MMM d, yyyy, HH:mm:ss"></div>
				</div>
			<%/foreach>
			<div class="create-reply">
				<form method="post" action="createReply.html">
					<input type="hidden" name="formPassword" value="<% formPassword|html>" />
					<input type="hidden" name="post" value="<% post.id>" />
					<input type="text" name="text" value="" />
					<button type="submit">Post Reply</button>
				</form>
			</div>
		<%foreachelse>
			<div><%= Page.Index.PostList.Text.NoPostYet|l10n|html></div>
		<%/foreach>
	</div>

</div>