<div id="sone">

	<div id="formPassword"><% formPassword|html></div>

	<script src="javascript/jquery-1.4.2.js" language="javascript"></script>
	<script src="javascript/sone.js" language="javascript"></script>

	<script language="javascript">
		/* this initializes the status update input field. */
		$(document).ready(function() {
			registerInputTextareaSwap("#sone #update-status .status-input", "WebInterface.DefaultText.StatusUpdate", "text", false);
		});
	</script>

	<script language="javascript">
		/* these functions are necessary for updating Sone statuses. */
		$(document).ready(function() {
			$("#sone .sone").each(function() {
				watchSone($(this).find(".id").text());
			});
		});
	</script>

	<script language="javascript">
		/* this initializes all reply input fields. */
		$(document).ready(function() {
			registerInputTextareaSwap("#sone input.reply-input", "WebInterface.DefaultText.Reply", "text", false);
			addCommentLinks();
		});
	</script>

	<script language="javascript">
		/* replace all “delete” buttons with javascript. */
		$(document).ready(function() {
			$("#sone .post").each(function() {
				postId = $(this).attr("id");
				enhanceDeletePostButton("#sone .post#" + postId + " > .status-line .delete button", postId);
				(function(postId) {
					$("#sone .post#" + postId + " .reply").each(function() {
						replyId = $(this).attr("id");
						(function(postId, reply, replyId) {
							reply.find(".delete button").each(function() {
								enhanceDeleteReplyButton("#sone .post#" + postId + " .reply#" + replyId + " .delete button", replyId);
							})
						})(postId, $(this), replyId);
					});
				})(postId);
			});
		});
	</script>

	<div id="main">

		<div id="profile" class="<%ifnull currentSone>offline<%else>online<%/if>">
			<a class="picture" href="index.html">&nbsp;</a>
			<%ifnull ! currentSone>
				<div id="home-sone">
					<% currentSone|store key=sone>
					<%include include/viewSone.html>
					<%include include/updateStatus.html>
				</div>
			<%/if>
		</div>
